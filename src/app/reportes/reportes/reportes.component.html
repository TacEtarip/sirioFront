<mat-toolbar [ngStyle]="{'padding': '.5em'}"  class="example-toolbar toolBar">
  <button color="accent" class="sizeIcon  menuBtn" mat-icon-button><mat-icon class="sizeIcon" >menu</mat-icon></button>
  <span  class="toolBarName"> <b (click)="reloadPage()" [ngStyle]="{'cursor': 'pointer'}" class="cName">Sirio Dinar</b></span>
  <span class="example-spacer"></span>
  <div tabindex="0" matTooltip="Usuario" class="perfilBtns" [ngStyle]="{'cursor': 'pointer', 'padding-bottom': '2px' }" [matMenuTriggerFor]="menu">
    <!--<span *ngIf="!mobileQuery.matches">{{nombreUsuario}}</span>-->
    <mat-icon  [ngStyle]="{'align-self': 'center', 'font-size': '26px' }" color="primary">person</mat-icon>
  </div>
  <mat-menu  #menu="matMenu">
    <button routerLink="/usuario" *ngIf="auth.loggedIn()"  mat-menu-item>
      <mat-icon color="accent">account_box</mat-icon>
      Perfil
    </button>
    <button  (click)="aToLogin()" *ngIf="!auth.loggedIn()"  mat-menu-item>
      <span>Iniciar Sesión</span>
    </button>
    <button (click)="cerrarSesion()"  *ngIf="auth.loggedIn()" mat-menu-item>
      <mat-icon color="accent">power_off</mat-icon>
      <span>Cerrar Sesión</span>
    </button>
  </mat-menu>

  <button (click)="aInventario()"  matTooltip="Inventario" mat-icon-button class="sizeIcon">
    <mat-icon color="primary" class="sizeIcon  sizeShop">assignment</mat-icon>
  </button>
  <button *ngIf="auth.loggedIn() && this.auth.getTtype() !== 'low'" (click)="aVentas()" matTooltip="Ventas" mat-icon-button class="sizeIcon addMargin">
    <mat-icon color="primary" class="sizeIcon  sizeShop">shopping_cart</mat-icon>
</button>
</mat-toolbar>
<section class="mainSpace">
  <nav class="sidenav">
    <div class="titulo"><h1>Reportes Estadisticos</h1></div>
    <mat-divider></mat-divider>
    <mat-list  role="list">
      <mat-list-item (click)="selectReporte(0)" [ngClass]="{'selected': (reporte$|async) === 0}"
      [ngStyle]="{'color': '#005087'}" matRipple
      [matRippleColor]="'#cfaa842c'"
      role="listitem"><h4>REPORTE GENERAL</h4></mat-list-item>
    </mat-list>
    <mat-divider></mat-divider>
    <mat-list role="list">
      <div mat-subheader [ngStyle]="{'color': '#E87200'}">Reporte De Ventas</div>
      <mat-list-item disabled (click)="selectReporte(1)"  [ngClass]="{'selected': (reporte$|async) === 1}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem"><h4>REPORTE GENERAL</h4></mat-list-item>
      <mat-list-item disabled (click)="selectReporte(2)"  [ngClass]="{'selected': (reporte$|async) === 2}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem"><h4>REPORTE DE GANANCIAS</h4></mat-list-item>
      <mat-list-item disabled (click)="selectReporte(3)"  [ngClass]="{'selected': (reporte$|async) === 3}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem"><h4>REPORTE POR ITEM</h4></mat-list-item>
      <mat-list-item disabled (click)="selectReporte(4)"  [ngClass]="{'selected': (reporte$|async) === 4}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem"><h4>REPORTE POR CLIENTE</h4></mat-list-item>
    </mat-list>
    <mat-divider></mat-divider>
    <mat-list role="list">
      <div mat-subheader [ngStyle]="{'color': '#E87200'}">Reporte De Gastos</div>
      <mat-list-item disabled (click)="selectReporte(5)"  [ngClass]="{'selected': (reporte$|async) === 5}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem"><h4>REPORTE GENERAL</h4></mat-list-item>
      <mat-list-item disabled (click)="selectReporte(6)"  [ngClass]="{'selected': (reporte$|async) === 6}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem"><h4>GASTO POR ITEM</h4></mat-list-item>
    </mat-list>
    <mat-divider></mat-divider>
    <mat-list role="list">
      <div mat-subheader [ngStyle]="{'color': '#E87200'}">Reporte De Items</div>
      <mat-list-item disabled (click)="selectReporte(7)"  [ngClass]="{'selected': (reporte$|async) === 7}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem"><h4>REPORTE GENERAL</h4></mat-list-item>
      <mat-list-item disabled (click)="selectReporte(8)"  [ngClass]="{'selected': (reporte$|async) === 8}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem"><h4>REPORTE INDIVIDUAL</h4></mat-list-item>
    </mat-list>
    <mat-divider></mat-divider>
  </nav>
  <section *ngIf="(doneDataCollect$|async) === 3" class="mainCtn">

    <div class="firstChart">
      <h2>Resumen De Stock</h2>
      <div class="reporteChartOne">
        <div>
          <mat-list role="list">
            <div mat-subheader>Stock Actual</div>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <h5>Posibles ventas con el stock disponible: <b>{{ventasAprox|currency:'S/'}}</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <h5>Gasto aproximado en stock disponible: <b>{{costoStock|currency:'S/'}}</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <h5>Posible ganancia con el stock disponible: <b>{{gananciaAprox|currency:'S/'}}</b></h5>
            </mat-list-item>

            <mat-divider></mat-divider>
            <div mat-subheader>Stock Total</div>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <h5>Invercion total:
                <b>{{invercionTotal|currency:'S/'}}</b> | Ingreso total: <b>{{ingresoTotal|currency:'S/'}} </b> | Balance total:
                <b>{{(ingresoTotal - invercionTotal)|currency:'S/'}}</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <h5>Invercion total en productos de stock: <b>{{gastosHistoricos|currency:'S/'}}
              </b> | Ingreso total por productos de stock: <b>{{ingresorHistoricos|currency:'S/'}}</b></h5>
            </mat-list-item>

          </mat-list>
        </div>
      </div>
    </div>
    <div class="firstChart">
      <h2>Ventas En El Tiempo</h2>
      <div class="reporteChartOne">
        <div>
          <mat-list role="list">
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <h5>Crecimiento de x con respecto a: <b>{{gananciasVentasTotales|currency:'S/'}}</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <h5 >Ganancia por ventas total: <b>{{gananciasVentasTotales|currency:'S/'}}</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <h5 >Ganancia por ventas con items fuera de tienda: <b>{{gananciasVentasFueraStock|currency:'S/'}}</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <h5>Ganancia por ventas con items de tienda: <b>{{gananciasVentasSoloStock|currency:'S/'}}</b></h5>
            </mat-list-item>
          </mat-list>
        </div>
      </div>
      <div class="graphContainer">
      <ngx-charts-line-chart [ngStyle]="{'font-family': 'futura-pt, sans-serif'}"
      [view] = "view"
      [scheme]="colorScheme"
      [legend]="true"
      [showXAxisLabel]="showXAxisLabel"
      [showYAxisLabel]="showYAxisLabel"
      [xAxis]="xAxis"
      [yAxis]="yAxis"
      [xAxisLabel]="xAxisLabel"
      [yAxisLabel]="yAxisLabel"
      [results]="multi"
      [autoScale]="true"
      [legendPosition]="'below'"
      >
    </ngx-charts-line-chart></div>

    </div>
    <div class="firstChart">
      <h2>Items con la mayor ganancia</h2>
      <div class="reporteChartOne">
        <div>
          <mat-list role="list">
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <h5>Item más rentable: {{itemMasRentable.name}} con un balance de <b>{{itemMasRentable.balance|currency:'S/'}}</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <h5>Item menos rentable: {{itemMenosRentable.name}} con un balance de <b>{{itemMenosRentable.balance|currency:'S/'}}</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <h5>Item más vendido (por cantidad de items vendidos): <b>{{itemMasVendidoCantidad}}</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <h5>Item con mayor ganancia en ventas: <b>{{itemMayorGananciaVentas.name}} ({{itemMayorGananciaVentas.value|currency:'S/'}})</b></h5>
            </mat-list-item>
          </mat-list>
        </div>
      </div>
      <div class="graphContainer">
      <ngx-charts-bar-vertical-2d
      [view] = "view"
      [ngStyle]="{'font-family': 'futura-pt, sans-serif'}"
      [scheme]="colorSchemeBarItems"
      [legend]="true"
      [showXAxisLabel]="showXAxisLabel"
      [showYAxisLabel]="showYAxisLabel"
      [xAxis]="xAxis"
      [yAxis]="yAxis"
      [xAxisLabel]="'Item'"
      [yAxisLabel]="yAxisLabel"
      [results]="single"
      [legendPosition]="'below'"
      >
    </ngx-charts-bar-vertical-2d>
    </div>

    </div>

    <div class="firstChart">
      <h2>Mejores clientes</h2>
      <div class="reporteChartOne">
        <div>
          <mat-list role="list">
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <h5>Cliente más regular: <b>{{clienteMasRegular.name}} ({{clienteMasRegular.cantida}} Ventas)</b></h5>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <h5>Cliente que ha dado mas ingresos: <b>{{clienteMayorIngreso.name}} ({{clienteMayorIngreso.cantidad|currency:'S/'}})</b></h5>
            </mat-list-item>
          </mat-list>
        </div>
      </div>
      <div class="graphContainer">
        <ngx-charts-bar-vertical
        [view] = "view"
        [ngStyle]="{'font-family': 'futura-pt, sans-serif'}"
        [scheme]="colorSchemeBarItemsCliente"
        [legend]="true"
        [showXAxisLabel]="showXAxisLabel"
        [showYAxisLabel]="showYAxisLabel"
        [xAxis]="xAxis"
        [yAxis]="yAxis"
        [xAxisLabel]="'Item'"
        [yAxisLabel]="yAxisLabel"
        [results]="clientes"
        [legendPosition]="'below'"
        >
      </ngx-charts-bar-vertical>
      </div>
    </div>


  </section>
</section>

