<mat-toolbar [ngStyle]="{'padding': '.5em'}"  class="example-toolbar toolBar">
  <button color="accent" class="sizeIcon" mat-icon-button><mat-icon class="sizeIcon" >menu</mat-icon></button>
  <span  class="toolBarName"> <b (click)="reloadPage()" [ngStyle]="{'cursor': 'pointer'}" class="cName">Sirio Dinar</b></span>
  <span class="example-spacer"></span>
  <div tabindex="0" matTooltip="Usuario" class="perfilBtns" [ngStyle]="{'cursor': 'pointer', 'padding-bottom': '2px' }" [matMenuTriggerFor]="menu">
    <!--<span *ngIf="!mobileQuery.matches">{{nombreUsuario}}</span>-->
    <mat-icon  [ngStyle]="{'align-self': 'center', 'font-size': '26px' }" color="primary">person</mat-icon>
  </div>
  <mat-menu  #menu="matMenu">
    <button routerLink="/usuario" *ngIf="auth.loggedIn()"  mat-menu-item>
      <mat-icon color="accent">account_box</mat-icon>
      Perfil
    </button>
    <button  (click)="aToLogin()" *ngIf="!auth.loggedIn()"  mat-menu-item>
      <span>Iniciar Sesión</span>
    </button>
    <button (click)="cerrarSesion()"  *ngIf="auth.loggedIn()" mat-menu-item>
      <mat-icon color="accent">power_off</mat-icon>
      <span>Cerrar Sesión</span>
    </button>
  </mat-menu>

  <button (click)="aInventario()"  matTooltip="Inventario" mat-icon-button class="sizeIcon">
    <mat-icon color="primary" class="sizeIcon  sizeShop">assignment</mat-icon>
  </button>
  <button *ngIf="auth.loggedIn() && this.auth.getTtype() !== 'low'" (click)="aVentas()" matTooltip="Ventas" mat-icon-button class="sizeIcon addMargin">
    <mat-icon color="primary" class="sizeIcon  sizeShop">shopping_cart</mat-icon>
</button>
</mat-toolbar>
<section class="mainSpace">
  <nav class="sidenav">
    <div class="titulo"><h1>Reportes Estadisticos</h1></div>
    <mat-divider></mat-divider>
    <mat-list  role="list">
      <mat-list-item (click)="selectReporte(0)" [ngClass]="{'selected': (reporte$|async) === 0}"
      [ngStyle]="{'color': '#005087'}" matRipple
      [matRippleColor]="'#cfaa842c'"
      role="listitem">REPORTE GENERAL</mat-list-item>
    </mat-list>
    <mat-divider></mat-divider>
    <mat-list role="list">
      <div mat-subheader [ngStyle]="{'color': '#E87200'}">Reporte De Ventas</div>
      <mat-list-item (click)="selectReporte(1)"  [ngClass]="{'selected': (reporte$|async) === 1}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem">REPORTE GENERAL</mat-list-item>
      <mat-list-item (click)="selectReporte(2)"  [ngClass]="{'selected': (reporte$|async) === 2}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem">REPORTE DE GANANCIAS</mat-list-item>
      <mat-list-item (click)="selectReporte(3)"  [ngClass]="{'selected': (reporte$|async) === 3}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem">REPORTE POR ITEM</mat-list-item>
      <mat-list-item (click)="selectReporte(4)"  [ngClass]="{'selected': (reporte$|async) === 4}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem">REPORTE POR CLIENTE</mat-list-item>
    </mat-list>
    <mat-divider></mat-divider>
    <mat-list role="list">
      <div mat-subheader [ngStyle]="{'color': '#E87200'}">Reporte De Gastos</div>
      <mat-list-item (click)="selectReporte(5)"  [ngClass]="{'selected': (reporte$|async) === 5}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem">REPORTE GENERAL</mat-list-item>
      <mat-list-item (click)="selectReporte(6)"  [ngClass]="{'selected': (reporte$|async) === 6}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem">GASTO POR ITEM</mat-list-item>
    </mat-list>
    <mat-divider></mat-divider>
    <mat-list role="list">
      <div mat-subheader [ngStyle]="{'color': '#E87200'}">Reporte De Items</div>
      <mat-list-item (click)="selectReporte(7)"  [ngClass]="{'selected': (reporte$|async) === 7}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem">REPORTE GENERAL</mat-list-item>
      <mat-list-item (click)="selectReporte(8)"  [ngClass]="{'selected': (reporte$|async) === 8}" matRipple [matRippleColor]="'#cfaa842c'" role="listitem">REPORTE INDIVIDUAL</mat-list-item>
    </mat-list>
    <mat-divider></mat-divider>
  </nav>
  <section *ngIf="(doneDataCollect$|async) === 3" class="mainCtn">

    <div class="firstChart">
      <h2>Resumen De Stock</h2>
      <div class="reporteChartOne">
        <div>
          <mat-list role="list">
            <div mat-subheader>Stock Actual</div>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <div mat-line>Posibles ventas con el stock disponible: <b>{{ventasAprox|currency:'S/'}}</b></div>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <div mat-line>Gasto aproximado en stock disponible: <b>{{costoStock|currency:'S/'}}</b></div>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <div mat-line>Posible ganancia con el stock disponible: <b>{{gananciaAprox|currency:'S/'}}</b></div>
            </mat-list-item>

            <mat-divider></mat-divider>
            <div mat-subheader>Stock Total</div>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <div mat-line>Invercion total:
                <b>{{invercionTotal|currency:'S/'}}</b> | Ingreso total: <b>{{ingresoTotal|currency:'S/'}} </b> | Balance total:
                <b>{{(ingresoTotal - invercionTotal)|currency:'S/'}}</b></div>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <div mat-line>Invercion total en productos de stock: <b>{{gastosHistoricos|currency:'S/'}}
              </b> | Ingreso total por productos de stock: <b>{{ingresorHistoricos|currency:'S/'}}</b></div>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <div mat-line>Item más rentable: {{itemMasRentable.name}} con un balance de <b>{{itemMasRentable.balance|currency:'S/'}}</b></div>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon>show_chart</mat-icon>
              <div mat-line>Item menos rentable: {{itemMenosRentable.name}} con un balance de <b>{{itemMenosRentable.balance|currency:'S/'}}</b></div>
            </mat-list-item>
          </mat-list>
        </div>
      </div>
    </div>
    <div class="firstChart">
      <h2>Ventas En El Tiempo</h2>
      <div class="reporteChartOne">
        <div>
          <mat-list role="list">
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <div mat-line>Ganancia por ventas total: <b>{{gananciasVentasTotales|currency:'S/'}}</b></div>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <div mat-line>Ganancia por ventas con items fuera de tienda: <b>{{gananciasVentasFueraStock|currency:'S/'}}</b></div>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <div mat-line>Ganancia por ventas con items de tienda: <b>{{gananciasVentasSoloStock|currency:'S/'}}</b></div>
            </mat-list-item>
          </mat-list>
        </div>
      </div>
      <div class="graphContainer">
      <ngx-charts-line-chart [ngStyle]="{'font-family': 'futura-pt, sans-serif'}"
      [view] = "[800, 400]"
      [scheme]="colorScheme"
      [legend]="true"
      [showXAxisLabel]="showXAxisLabel"
      [showYAxisLabel]="showYAxisLabel"
      [xAxis]="xAxis"
      [yAxis]="yAxis"
      [xAxisLabel]="xAxisLabel"
      [yAxisLabel]="yAxisLabel"
      [results]="multi"
      [autoScale]="true"
      [legendPosition]="'below'"
      >
    </ngx-charts-line-chart></div>

    </div>
    <div class="firstChart">
      <h2>Items con la mayor ganancia</h2>
      <div class="reporteChartOne">
        <div>
          <mat-list role="list">
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <div mat-line>Crecimiento de ventas respecto al més pasado (Febrero): 30%</div>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <div mat-line>Crecimiento de ganancias respecto al més pasado (Febrero): 30%</div>
            </mat-list-item>
          </mat-list>
        </div>
      </div>
      <div class="graphContainer">
      <ngx-charts-bar-vertical-2d
      [view] = "[800, 400]"
      [ngStyle]="{'font-family': 'futura-pt, sans-serif'}"
      [scheme]="colorSchemeBarItems"
      [legend]="true"
      [showXAxisLabel]="showXAxisLabel"
      [showYAxisLabel]="showYAxisLabel"
      [xAxis]="xAxis"
      [yAxis]="yAxis"
      [xAxisLabel]="'Item'"
      [yAxisLabel]="yAxisLabel"
      [results]="single"
      [legendPosition]="'below'"
      >
    </ngx-charts-bar-vertical-2d>
    </div>

    </div>

    <div class="firstChart">
      <h2>Mejores clientes</h2>
      <div class="reporteChartOne">
        <div>
          <mat-list role="list">
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <div mat-line>Crecimiento de ventas respecto al més pasado (Febrero): 30%</div>
            </mat-list-item>
            <mat-list-item role="listitem">
              <mat-icon mat-list-icon> show_chart</mat-icon>
              <div mat-line>Crecimiento de ganancias respecto al més pasado (Febrero): 30%</div>
            </mat-list-item>
          </mat-list>
        </div>
      </div>
      <div class="graphContainer">
        <ngx-charts-bar-vertical
        [view] = "[800, 400]"
        [ngStyle]="{'font-family': 'futura-pt, sans-serif'}"
        [scheme]="colorSchemeBarItemsCliente"
        [legend]="true"
        [showXAxisLabel]="showXAxisLabel"
        [showYAxisLabel]="showYAxisLabel"
        [xAxis]="xAxis"
        [yAxis]="yAxis"
        [xAxisLabel]="'Item'"
        [yAxisLabel]="yAxisLabel"
        [results]="clientes"
        [legendPosition]="'below'"
        >
      </ngx-charts-bar-vertical>
      </div>


    </div>


  </section>
</section>

